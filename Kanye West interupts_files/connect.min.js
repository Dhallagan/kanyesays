function onLogin_callback(){FB.login(function(e){e.authResponse&&FB.api("/me?locale=en_US&fields=name,email,first_name,last_name",function(a){a.accessToken=e.authResponse.accessToken,CheckAndCreateUserAccount(a,!0)})},{scope:"email,public_profile"})}function handleSessionResponse(e){return!e||e.error?void alert("Error occured"):void("connected"==e.status&&"not_authorized"!=e.status&&e.authResponse&&(FaceBookSessionKey=e.authResponse.accessToken,FB.api("/me",function(e){CheckAndCreateUserAccount(e,!1)})))}function onLoadCallback(){gapi.client.setApiKey("AIzaSyAJND2ETUpbZynObB1wlKe2412V_KGlxJY"),gapi.client.load("plus","v1",function(){})}function google_login(){var e={clientid:"989636179364-a7b2s39pmvliaug5busjcb58vgit6n1r.apps.googleusercontent.com",cookiepolicy:"single_host_origin",callback:"gplusLoginCallback",approvalprompt:"force",scope:"https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email"};gapi.auth.signIn(e)}function gplusLoginCallback(e){if(e.status.signed_in){var a=gapi.client.plus.people.get({userId:"me"});a.execute(function(a){var o="";if(a.emails)for(i=0;i<a.emails.length;i++)"account"==a.emails[i].type&&(o=a.emails[i].value);var n="Name:"+a.displayName+"<br>";n+="Image:"+a.image.url+"<br>",n+="<img src='"+a.image.url+"' /><br>",n+="URL:"+a.url+"<br>",n+="Email:"+o+"<br>";var t="email="+o+"&firstname="+a.name.givenName+"&lastname="+a.name.familyName+"&FacebookUID="+a.id+"&FaceBookSessionKey="+e.access_token+"&loginuser=false";return jQuery.ajax({type:"POST",url:"/handler/FaceBookRegisterHandler.ashx",data:t,success:function(e){redirectToPage(e)},error:function(e){redirectToPage(msg)}}),!1})}}function CheckAndCreateUserAccount(e,a){if(null!=e&&null!=e.email){var o="",n="",t="",i="";null!=e.email&&(n=e.email),null!=e.first_name&&(o=e.first_name),null!=e.last_name&&(t=e.last_name),null!=e.id&&(i=e.id),null!=e.accessToken&&(FaceBookSessionKey=e.accessToken);var s="email="+n+"&firstname="+o+"&lastname="+t+"&FacebookUID="+i+"&FaceBookSessionKey="+FaceBookSessionKey+"&loginuser="+a;return jQuery.ajax({type:"POST",url:"/handler/FaceBookRegisterHandler.ashx",data:s,success:function(e){redirectToPage(e)},error:function(e){redirectToPage(msg)}}),!1}redirectToPage("EMAIL_NOT_EXIST")}function redirectToPage(e){"REGISTRATION_OK"==e?(alert("You have been successfully registered with us. An welcome mail has been sent with login information. You are now taken to account section."),openpopup("Please wait while redirecting to account"),""!=getParameterByName("url")?location.href=getParameterByName("url"):location.href="/account/"):"REGISTRATION_NOT_OK"==e?alert("Error in registration process. Please contact support"):"LOGIN_OK"==e?(openpopup("Please wait while redirecting to account"),""!=getParameterByName("url")?location.href=getParameterByName("url"):location.href="/account/"):"LOGIN_NOT_OK"==e?alert("Email ID exists but cannot log you in."):"EMAIL_NOT_EXIST"==e&&alert("Your Facebook does not have a valid email address. Please add an email address or register your SoundBoard account manually.")}var FaceBookSessionKey="";window.fbAsyncInit=function(){FB.init({appId:569988506500724,oauth:!0,status:!0,cookie:!0,xfbml:!0,version:"v2.5"})},function(e,a,o){var n,t=e.getElementsByTagName(a)[0];e.getElementById(o)||(n=e.createElement(a),n.id=o,n.src="//connect.facebook.net/en_US/sdk.js",t.parentNode.insertBefore(n,t))}(document,"script","facebook-jssdk"),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://apis.google.com/js/client.js?onload=onLoadCallback";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(e,a)}();